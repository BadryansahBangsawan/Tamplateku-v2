{"version":3,"sources":["turbopack:///[project]/components/ui/input.tsx","turbopack:///[project]/components/custom/SectionHeading.tsx","turbopack:///[project]/app/verify-email/page.tsx"],"sourcesContent":["import type * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\nexport { Input };\n","\"use client\";\n\nimport { cn } from \"@/lib/utils\";\nimport type { LucideIcon } from \"lucide-react\";\nimport { forwardRef } from \"react\";\n\nexport interface SectionHeadingProps {\n  /**\n   * Deprecated: no longer rendered\n   */\n  badge?: string;\n  /**\n   * The main heading text\n   */\n  heading: string;\n  /**\n   * Optional description text (hidden from screen readers by default)\n   */\n  description?: string;\n  /**\n   * Deprecated: no longer rendered\n   */\n  icon?: LucideIcon;\n  /**\n   * Size variant for the heading\n   * @default \"md\"\n   */\n  size?: \"sm\" | \"md\" | \"lg\" | \"xl\";\n  /**\n   * Text alignment\n   * @default \"center\"\n   */\n  align?: \"left\" | \"center\" | \"right\";\n  /**\n   * Additional CSS classes for the container\n   */\n  className?: string;\n  /**\n   * Additional CSS classes for the heading\n   */\n  headingClassName?: string;\n  /**\n   * Deprecated: no longer rendered\n   */\n  badgeClassName?: string;\n  /**\n   * HTML heading level (h1, h2, h3, h4, h5, h6)\n   * @default \"h2\"\n   */\n  as?: \"h1\" | \"h2\" | \"h3\" | \"h4\" | \"h5\" | \"h6\";\n  /**\n   * ID for the heading element (useful for anchor links)\n   */\n  id?: string;\n  /**\n   * Whether to show the description to screen readers\n   * @default false\n   */\n  showDescriptionToScreenReaders?: boolean;\n}\n\nconst sizeVariants = {\n  sm: {\n    heading: \"text-xl sm:text-2xl leading-tight\",\n    description: \"text-sm leading-snug\",\n    spacing: \"space-y-1.5\",\n  },\n  md: {\n    heading: \"text-2xl sm:text-3xl md:text-4xl leading-tight\",\n    description: \"text-sm sm:text-base leading-snug\",\n    spacing: \"space-y-2\",\n  },\n  lg: {\n    heading: \"text-3xl sm:text-4xl md:text-5xl leading-tight\",\n    description: \"text-base sm:text-md leading-snug\",\n    spacing: \"space-y-3 sm:space-y-4\",\n  },\n  xl: {\n    heading: \"text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-8xl leading-tight\",\n    description: \"text-lg sm:text-xl leading-snug\",\n    spacing: \"space-y-4 sm:space-y-6\",\n  },\n};\n\nconst alignVariants = {\n  left: \"text-left\",\n  center: \"text-center\",\n  right: \"text-right\",\n};\n\nconst SectionHeading = forwardRef<HTMLDivElement, SectionHeadingProps>(\n  (\n    {\n      heading,\n      description,\n      size = \"md\",\n      align = \"center\",\n      className,\n      headingClassName,\n      as: Component = \"h2\",\n      id,\n      showDescriptionToScreenReaders = false,\n      ...props\n    },\n    ref\n  ) => {\n    const variant = sizeVariants[size];\n    const alignment = alignVariants[align];\n\n    return (\n      <header ref={ref} className={cn(\"z-10\", variant.spacing, alignment, className)} {...props}>\n        {/* Heading */}\n        <Component\n          id={id}\n          className={cn(\n            \"text-foreground font-semibold\",\n            variant.heading,\n            align === \"center\" && \"md:mx-auto\",\n            headingClassName\n          )}\n        >\n          {heading}\n        </Component>\n\n        {/* Description */}\n        {description && (\n          <p\n            className={cn(\n              \"text-muted-foreground\",\n              variant.description,\n              align === \"center\" && \"md:mx-auto\",\n              !showDescriptionToScreenReaders && \"sr-only\"\n            )}\n            aria-live=\"polite\"\n          >\n            {description}\n          </p>\n        )}\n      </header>\n    );\n  }\n);\n\nSectionHeading.displayName = \"SectionHeading\";\n\nexport { SectionHeading };\n","\"use client\";\n\nimport { SectionHeading } from \"@/components/custom/SectionHeading\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport Link from \"next/link\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport { type FormEvent, Suspense, useState } from \"react\";\n\nfunction VerifyEmailPageContent() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const defaultEmail = searchParams.get(\"email\") ?? \"\";\n\n  const [email, setEmail] = useState(defaultEmail);\n  const [otp, setOtp] = useState(\"\");\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isResending, setIsResending] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(\"\");\n\n  const handleVerify = async (event: FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setErrorMessage(\"\");\n    setSuccessMessage(\"\");\n\n    if (!email.trim()) {\n      setErrorMessage(\"Email wajib diisi.\");\n      return;\n    }\n\n    if (!/^\\d{6}$/.test(otp)) {\n      setErrorMessage(\"Kode OTP harus 6 digit.\");\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      const response = await fetch(\"/api/otp/verify\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          email,\n          purpose: \"REGISTER\",\n          otp,\n        }),\n      });\n\n      const result = (await response.json()) as { ok: boolean; message?: string };\n      if (!response.ok || !result.ok) {\n        setErrorMessage(result.message ?? \"Verifikasi OTP gagal.\");\n        return;\n      }\n\n      router.push(\"/login?verified=success\");\n    } catch {\n      setErrorMessage(\"Tidak bisa terhubung ke server.\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleResend = async () => {\n    setErrorMessage(\"\");\n    setSuccessMessage(\"\");\n\n    if (!email.trim()) {\n      setErrorMessage(\"Isi email dulu sebelum kirim ulang OTP.\");\n      return;\n    }\n\n    setIsResending(true);\n    try {\n      const response = await fetch(\"/api/otp/request\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          email,\n          purpose: \"REGISTER\",\n        }),\n      });\n\n      const result = (await response.json()) as {\n        ok: boolean;\n        message?: string;\n        retryAfterSeconds?: number;\n      };\n\n      if (!response.ok) {\n        if (response.status === 429 && result.retryAfterSeconds) {\n          setErrorMessage(\n            `Terlalu sering kirim OTP. Coba lagi dalam ${result.retryAfterSeconds} detik.`\n          );\n          return;\n        }\n\n        setErrorMessage(result.message ?? \"Gagal mengirim ulang OTP.\");\n        return;\n      }\n\n      setSuccessMessage(\"OTP baru sudah dikirim ke email kamu.\");\n    } catch {\n      setErrorMessage(\"Tidak bisa terhubung ke server.\");\n    } finally {\n      setIsResending(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen w-full\">\n      <main id=\"main-content\">\n        <div className=\"mx-auto flex min-h-screen max-w-6xl flex-col px-5 pt-[116px] pb-16 md:pt-[128px] md:pb-24 lg:pt-[140px]\">\n          <section\n            className=\"mx-auto w-full max-w-xl space-y-8\"\n            aria-labelledby=\"verify-email-heading\"\n          >\n            <SectionHeading\n              badge=\"Email Verification\"\n              heading=\"Verifikasi Email Akun\"\n              description=\"Masukkan kode OTP 6 digit yang dikirim ke email untuk mengaktifkan akun kamu.\"\n              size=\"md\"\n              align=\"center\"\n              as=\"h1\"\n              id=\"verify-email-heading\"\n              className=\"mb-4\"\n              showDescriptionToScreenReaders={true}\n            />\n\n            {successMessage ? (\n              <div className=\"rounded-md border border-emerald-500/40 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-700 dark:text-emerald-300\">\n                {successMessage}\n              </div>\n            ) : null}\n\n            {errorMessage ? (\n              <div className=\"rounded-md border border-destructive/40 bg-destructive/10 px-3 py-2 text-sm text-destructive\">\n                {errorMessage}\n              </div>\n            ) : null}\n\n            <form\n              className=\"space-y-4 md:space-y-5\"\n              aria-label=\"Verify email OTP\"\n              onSubmit={handleVerify}\n            >\n              <div className=\"space-y-2\">\n                <label htmlFor=\"verify-email\" className=\"text-sm font-medium text-heading\">\n                  Email\n                </label>\n                <Input\n                  id=\"verify-email\"\n                  name=\"email\"\n                  type=\"email\"\n                  placeholder=\"Masukkan email kamu\"\n                  autoComplete=\"email\"\n                  value={email}\n                  onChange={(event) => setEmail(event.target.value)}\n                  required\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <label htmlFor=\"verify-otp\" className=\"text-sm font-medium text-heading\">\n                  Kode OTP\n                </label>\n                <Input\n                  id=\"verify-otp\"\n                  name=\"otp\"\n                  type=\"text\"\n                  inputMode=\"numeric\"\n                  pattern=\"[0-9]{6}\"\n                  maxLength={6}\n                  placeholder=\"Contoh: 123456\"\n                  value={otp}\n                  onChange={(event) => setOtp(event.target.value.replace(/\\D/g, \"\").slice(0, 6))}\n                  required\n                />\n              </div>\n\n              <Button type=\"submit\" className=\"w-full\" disabled={isSubmitting}>\n                {isSubmitting ? \"Memverifikasi...\" : \"Verifikasi Email\"}\n              </Button>\n\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                className=\"w-full\"\n                onClick={handleResend}\n                disabled={isResending}\n              >\n                {isResending ? \"Mengirim Ulang...\" : \"Kirim Ulang OTP\"}\n              </Button>\n            </form>\n\n            <p className=\"text-center text-sm text-label\">\n              Sudah verifikasi?{\" \"}\n              <Link href=\"/login\" className=\"text-primary hover:underline\">\n                Login di sini\n              </Link>\n            </p>\n          </section>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default function VerifyEmailPage() {\n  return (\n    <Suspense fallback={null}>\n      <VerifyEmailPageContent />\n    </Suspense>\n  );\n}\n"],"names":[],"mappings":"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"}